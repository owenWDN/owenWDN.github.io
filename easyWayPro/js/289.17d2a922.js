"use strict";(self["webpackChunkoneselfeasyway"]=self["webpackChunkoneselfeasyway"]||[]).push([[289],{711:function(e,t,i){i.r(t),i.d(t,{default:function(){return Y}});var s=i(3396),o=i(7156),a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAhCAYAAADK6cvnAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAHKADAAQAAAABAAAAIQAAAAAexKqvAAACyUlEQVRIDe1WQU9TQRD+pgVRJKaJBjRA6IEYNTFNNCTopXr3YiIeuXgzXrh48y8IF+8ab0b/AzWa4sVQD8YYazBAIlr0YTCI8Hacfa/bfdS3vm2jXnQO3XmzM/PNzO7MltABzVX4mmK+BfCYjxmBQhBqYLoxc4Gq2oZ8DLXO3DxPMPEzZva2afkm+jDSS8Wr52kr1xJmMAxc7ApM+2UefL+L05rt0T9eRKofgmpoMlHU5QBY3QBODQGH9scaX74BL9eMNhAS+vWXP6C1jbhzxURxllQMeJQwWogrvhywACYibNp3DfhgUbVC0Nlomn/D6OuJQbZ3Y1n7b9eAuoTt1PjaLvn5u2vAmbItaVVKuvAOuFLaW9KHtd9YUn1GhkxJP25qSSyPeaNhV/8MKbdIUPeM6aMXkWOStjwuskktr9RtEEavfW0B6h6breAS5XGWWI0x6Jgo91kDcUYkLYUwl6M1VliWsfHqSAHXP23QZaXUfavr5lqAc4/VXVGb5tAUxR2tCpt7sqwHdPNwgSYan2lBLKNM3XBAdPKzVS5K5NO/UnTtSWVOrm9giohfu3SS8ggwv4OxpLBjnnFCbNwlSTiMSso5HITtY5THCWeG44nxfJVRkYYeKQBTJdsKsxVrQDmMypnuJPw62QhQjqSY1FiR2WgCjnlgcxvQ4GmkFA9JeCtpe+0yc2l6kxv1BqPeSEqAYEuuvWSaRnJ5834FdQzvwgFgoNkQOjMNtk9CGxywcCZzK/HjTIZ7tEtyfu1nqMFcZ7jHOOMjFfDJW0Z1KS5f2LwbeljfeWovSoZf53YqoAYxQMZS+hTfHU+O0fFZUwE7bQsfIKOTCthpWxhnPmsqYKdt4QNkdOzoMJI/vP51QLpdUfPy0A2D1Xi3yRFRIJNmm8HyR9FFVJP3M+iRF7Vs5qZLNUsuT5SM9iziku/4y/L0f/8fq8APgykS0gCLkHoAAAAASUVORK5CYII=";const l=e=>((0,s.dD)("data-v-290bda01"),e=e(),(0,s.Cn)(),e),n={class:"page"},c={style:{"min-height":"100vh"}},r={class:"page_title"},h={class:"left"},d=l((()=>(0,s._)("span",null,[(0,s._)("img",{src:a,alt:""})],-1))),m=l((()=>(0,s._)("span",null,[(0,s.Uk)(" 酒店住宿 "),(0,s._)("br"),(0,s.Uk)(" Hotel ")],-1))),u={class:"page_cont"},p={class:"routertype"},_={class:"search-cont"},y={class:"cont"},g={style:{padding:"0 20px"}},w=l((()=>(0,s._)("span",null,"目的地/Destination",-1))),A={class:"cont",style:{padding:"0 20px"}},f=l((()=>(0,s._)("span",null,"入住日期/Check-In",-1))),C=l((()=>(0,s._)("span",null,"退房日期/Check-out",-1))),k={class:"cont"},v={style:{padding:"0 20px"},class:"holeClass"},D=l((()=>(0,s._)("span",null,"酒店级别/Hotel Level",-1))),b=l((()=>(0,s._)("span",null,"区域位置/Location",-1))),x={class:"cont"},P={style:{padding:"0 20px"},class:"hotelKeyword"},S=l((()=>(0,s._)("span",null,"关键词/Keywords",-1))),N={class:"travrler"},V=l((()=>(0,s._)("span",null,[(0,s.Uk)("下一步"),(0,s._)("br"),(0,s.Uk)("Next Step")],-1))),I=[V],W={class:"pup"},L=["onClick"];function U(e,t,i,a,l,V){const U=(0,s.up)("van-icon"),T=(0,s.up)("van-field"),M=(0,s.up)("van-col"),R=(0,s.up)("psd_cont"),O=(0,s.up)("van-search"),B=(0,s.up)("van-pull-refresh"),Q=(0,s.up)("van-popup"),J=(0,s.up)("van-calendar"),Y=(0,s.up)("van-picker");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",c,[(0,s._)("div",r,[(0,s._)("span",h,[(0,s.Wm)(U,{name:"arrow-left",size:"25",onClick:t[0]||(t[0]=t=>e.$router.go(-1))})]),d,m]),(0,s._)("div",u,[(0,s._)("div",p,[(0,s._)("div",null,[(0,s._)("div",_,[(0,s._)("div",y,[(0,s._)("div",g,[(0,s.Wm)(M,{span:"10"},{default:(0,s.w5)((()=>[w,(0,s.Wm)(T,{readonly:"",clickable:"",modelValue:V.hotelDestination,"onUpdate:modelValue":t[1]||(t[1]=e=>V.hotelDestination=e),placeholder:"选择城市",onClick:t[2]||(t[2]=e=>{l.showPicker=!0,V.get_district_list()})},null,8,["modelValue"])])),_:1})])]),(0,s._)("div",A,[(0,s.Wm)(M,{span:"10"},{default:(0,s.w5)((()=>[f,(0,s.Wm)(T,{readonly:"",clickable:"",modelValue:l.date_D[0],"onUpdate:modelValue":t[3]||(t[3]=e=>l.date_D[0]=e),placeholder:"选择日期",onClick:t[4]||(t[4]=t=>{l.showPickerTwo=!0,e.date_n=0})},null,8,["modelValue"])])),_:1}),(0,s.Wm)(M,{span:"4"}),(0,s.Wm)(M,{span:"14",class:"aliginright"},{default:(0,s.w5)((()=>[C,(0,s.Wm)(T,{readonly:"",clickable:"",modelValue:l.date_D[1],"onUpdate:modelValue":t[5]||(t[5]=e=>l.date_D[1]=e),placeholder:"选择日期",onClick:t[6]||(t[6]=t=>{l.showPickerTwo=!0,e.date_n=1})},null,8,["modelValue"])])),_:1})]),(0,s._)("div",k,[(0,s._)("div",v,[(0,s.Wm)(M,{span:"12"},{default:(0,s.w5)((()=>[D,(0,s.Wm)(T,{readonly:"",clickable:"",modelValue:l.cabin,"onUpdate:modelValue":t[7]||(t[7]=e=>l.cabin=e),placeholder:"选择座位等级",onClick:t[8]||(t[8]=e=>l.showPicker3=!0)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(M,{span:"12",class:"aliginright"},{default:(0,s.w5)((()=>[b,(0,s.Wm)(T,{readonly:"",clickable:"",modelValue:l.hotelRegionalPosition,"onUpdate:modelValue":t[9]||(t[9]=e=>l.hotelRegionalPosition=e),placeholder:"请选择/choose",onClick:t[10]||(t[10]=e=>{l.showPicker5=!0,V.get_district_list()})},null,8,["modelValue"])])),_:1})])]),(0,s._)("div",x,[(0,s._)("div",P,[(0,s.Wm)(M,{span:"24"},{default:(0,s.w5)((()=>[S,(0,s.Wm)(T,{modelValue:l.keyword,"onUpdate:modelValue":t[11]||(t[11]=e=>l.keyword=e),placeholder:"请输入关键词/Please enter key words"},null,8,["modelValue"])])),_:1})])])])])])]),(0,s._)("div",N,[(0,s.Wm)(R)])]),(0,s._)("div",{class:"next",onClick:t[12]||(t[12]=(...e)=>V.searchb&&V.searchb(...e))},I),(0,s._)("div",W,[(0,s.Wm)(Q,{class:"select_popup van_listp",show:l.showPicker,"onUpdate:show":t[15]||(t[15]=e=>l.showPicker=e),round:"",position:"bottom",style:{height:"40%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{modelValue:l.searchValuex,"onUpdate:modelValue":t[13]||(t[13]=e=>l.searchValuex=e),placeholder:"请输入城市名"},null,8,["modelValue"]),(0,s.Wm)(B,{modelValue:l.hotelRefreshing,"onUpdate:modelValue":t[14]||(t[14]=e=>l.hotelRefreshing=e),onRefresh:V.hotelOnRefresh},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(V.search_citylist,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[(0,s._)("span",{onClick:t=>V.hotelSelectCity(e)},(0,o.zw)(e.CityNameChinese+"("+e.CityNameEnglish+")"),9,L)])))),128))])),_:1},8,["modelValue","onRefresh"])])),_:1},8,["show"]),(0,s.Wm)(J,{show:l.showPickerTwo,"onUpdate:show":t[16]||(t[16]=e=>l.showPickerTwo=e),type:"range",onConfirm:V.onConfirmTwo,color:"#044db5",title:"日期选择/Date selection","confirm-text":"完成/Confirm","confirm-disabled-text":"请选择结束时间/Select end time",formatter:V.formatter},null,8,["show","onConfirm","formatter"]),(0,s.Wm)(Q,{class:"select_popup",show:l.showPicker3,"onUpdate:show":t[18]||(t[18]=e=>l.showPicker3=e),round:"",position:"bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(Y,{"show-toolbar":"","allow-html":"",columns:l.cabins,onConfirm:V.onConfirm3,onCancel:t[17]||(t[17]=e=>l.showPicker3=!1)},null,8,["columns","onConfirm"])])),_:1},8,["show"]),(0,s.Wm)(Q,{class:"select_popup",show:l.showPicker5,"onUpdate:show":t[21]||(t[21]=e=>l.showPicker5=e),round:"",position:"bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{modelValue:l.search_district,"onUpdate:modelValue":t[19]||(t[19]=e=>l.search_district=e),placeholder:"请输入地区名"},null,8,["modelValue"]),(0,s.Wm)(Y,{"show-toolbar":"","value-key":"LocationName","allow-html":"",columns:V.filter_district_list,onConfirm:V.onConfirm5,onCancel:t[20]||(t[20]=e=>l.showPicker5=!1)},null,8,["columns","onConfirm"])])),_:1},8,["show"])])])}i(560);var T=i(1234),M=i(5489),R=i(9374),O=i(868),B={data(){return{showPicker:!1,showPicker2:!1,showPickerTwo:!1,showPicker3:!1,showPicker5:!1,cities:[{LocIdCity:"0201",CityNameChinese:"上海 ",CityNameEnglish:"SHANGHAI "},{CityNameChinese:"北京",CityNameEnglish:"BEIJING",LocIdCity:"867219481552416984",city_code:"BEIJING_BJ",initial:"B",pro_code:"0100"}],cities_n:0,date_D:[(new Date).format("yyyy-MM-dd"),new Date((new Date).getTime()+864e5).format("yyyy-MM-dd")],date_picker:[new Date,new Date((new Date).getTime()+31536e7),new Date],cabins:[{value:"-1",text:"不限/NoLimit"},{value:"0,1,2",text:"经济/客栈/≤2*"},{value:"3",text:"三星/舒适/3"},{value:"4",text:"四星/高档/4"},{value:"5",text:"五星/豪华/5"}],hotelRefreshing:!1,level:null,cabin:"不限/NoLimit",district:null,hotelRegionalPosition:"",keyword:"",citylist:[],district_list:[],searchValuex:"",search_district:"",now_trip_hotel:[{city:{$id:"121",LocIdCity:"0201",CityNameEnglish:"Shanghai",CityNameChinese:"上海 "},checkout:this.dest_arr?this.dest_arr.checkout:new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"),checkin:this.dest_arr?this.dest_arr.checkin:(new Date).format("yyyy-MM-dd")}],dest_arr:sessionStorage.getItem("dest_arr")?JSON.parse(sessionStorage.getItem("dest_arr")):null}},created(){if(sessionStorage.getItem("search_hotel")&&sessionStorage.removeItem("search_hotel"),sessionStorage.getItem("search_hotelx")){let e=JSON.parse(sessionStorage.getItem("search_hotelx"));this.cabin=e.cabin,this.cities=e.cities,this.date_D=e.date,this.district=e.district}this.dest_arr&&(this.now_trip_hotel[0].city={CityNameEnglish:" ",CityNameChinese:this.dest_arr.city}),this.set_address_for_hotel_getcity(),this.get_district_list()},computed:{search_citylist(){return this.searchValuex?this.citylist.filter((e=>-1!=e.CityNameChinese.indexOf(this.searchValuex)||-1!=e.CityNameEnglish.toLowerCase().indexOf(this.searchValuex.toLowerCase()))):this.citylist},filter_district_list(){return this.search_district?this.district_list.filter((e=>-1!=e.LocationName.indexOf(this.search_district))):this.district_list},hotelDestination(){return this.cities[0].CityNameChinese+`(${this.cities[0].CityNameEnglish})`}},methods:{set_address_for_hotel_getcity(){sessionStorage.getItem("hotelCity")?this.citylist=JSON.parse(sessionStorage.getItem("hotelCity")):(0,R.Z)({method:"get",url:"https://timas.efasco.com/wxapp/public/newcity2.json",dataType:"json"}).then((e=>{sessionStorage.setItem("hotelCity",JSON.stringify(e.data)),this.citylist=e.data,this.hotelRefreshing=!1})).catch((e=>{console.log("失败",e)}))},get_district_list(){R.Z.get("https://timas.efasco.com/HotelService.asmx/getElongLocationByCityId?citycode="+this.cities[0].LocIdCity).then((e=>{e.data=e.data.map((e=>({...e,text:e.LocationName,value:e.LocationId}))),this.district_list=[{LocationName:"不限",text:"不限",value:"不限"}].concat(e.data)})).catch((e=>{console.log(e)}))},getcabins(){const e=this.cabins,t=e.map((e=>e.level_text));return t},onConfirmTwo(e){const[t,i]=e;this.date_D[0]=new Date(t).format("yyyy-MM-dd"),this.date_D[1]=new Date(i).format("yyyy-MM-dd"),this.showPickerTwo=!1},formatter(e){return"start"===e.type?e.bottomInfo="入住/Arr":"end"===e.type&&(e.bottomInfo="离店/Dep"),e},onConfirm3(e){this.cabin=e.selectedOptions[0].text,this.showPicker3=!1},onConfirm5(e){this.district=e.selectedOptions[0],this.hotelRegionalPosition=e.selectedOptions[0].text,this.showPicker5=!1},hotelOnRefresh(){this.set_address_for_hotel_getcity(),setTimeout((()=>{(0,O.CF)("刷新成功"),this.hotelRefreshing=!1}),1e3)},hotelSelectCity(e){this.hotelRegionalPosition="",this.showPicker=!1,this.cities[0]=e},searchb(){let e=this.district;(!this.district||this.district&&"不限"==this.district.LocationName)&&(e="");const t={psg:this.$store.state.choose_psg.concat(this.$store.state.choose_psg_more),cabin:this.cabin,cities:this.cities,date:this.date_D,keyword:this.keyword,district:e};let i=this.date_D[0],s=this.date_D[1];i&&s?new Date(i.replace(/-/g,"/")).getTime()>new Date(s.replace(/-/g,"/")).getTime()?this.notice("退房日期应在入住日期之后/The check-out date should be after the check-in date!"):this.cities[0]?0!=this.$store.state.choose_psg.length?(sessionStorage.setItem("search_hotelx",JSON.stringify(t)),sessionStorage.setItem("search_hotel",JSON.stringify(this.GetJsonData2(t))),this.$store.commit("removehotellist"),console.log("search",t),this.$router.push({path:"/hotellist"})):this.notice("请选择入住人/Please select the occupant!"):this.notice("请选择城市/Please select city!"):this.notice("请选择日期/Please select date!")},GetJsonData2(e,t,i){let s="All";return{psg:this.$store.state.choose_psg.concat(this.$store.state.choose_psg_more),cityId:e.cities[0].LocIdCity,arrivalDate:e.date[0],departureDate:e.date[1],queryText:e.keyword,highRate:9999,lowRate:0,PaymentType:"All",Sort:i&&i.Sort?i.Sort:"Default",DistrictId:e.district&&e.district.LocationId?e.district.LocationId:s,starRate:this.getLevel(this.cabin),pageIndex:1,PageSize:10,ResultType:"1,2,4",city:e.cities[0],catchN:0}},getLevel(e){return"不限/NoLimit"==e?"-1":"经济/客栈/≤2*"==e?"0,1,2":"三星/舒适/3"==e?"3":"四星/高档/4"==e?"4":"五星/豪华/5"==e?"5":void 0},notice(e){this.$dialog({title:"提示/Notice",message:e,theme:"round-button",confirmButtonText:"确定/Confirm",confirmButtonColor:"linear-gradient(160deg, #0274c9 0%, #044db5 100%)"})},get_back_Date(e){console.log(e);var t=e.getTime()+864e5;this.date_D[1]=new Date(t).format("yyyy-MM-dd")},cityclick(e){this.showPicker=!1,this.district=null,this.cities[this.cities_n]=e,this.get_district_list()}},components:{psd_cont:T.Z,infinite:M.Z}},Q=i(89);const J=(0,Q.Z)(B,[["render",U],["__scopeId","data-v-290bda01"]]);var Y=J}}]);
//# sourceMappingURL=289.17d2a922.js.map