"use strict";(self["webpackChunkoneselfeasyway"]=self["webpackChunkoneselfeasyway"]||[]).push([[878],{1333:function(e,t,i){i.r(t),i.d(t,{default:function(){return J}});var s=i(3396),a=i(7156),o=i(3233),n=i.p+"img/train.0c4a4f5f.png",l=i(5370);const c=e=>((0,s.dD)("data-v-2b0df2aa"),e=e(),(0,s.Cn)(),e),r={class:"page"},d={style:{"min-height":"100vh"}},h={class:"page_title"},u={class:"left"},m=c((()=>(0,s._)("span",null,[(0,s._)("img",{style:{width:"25px",height:"25px"},src:n,alt:""})],-1))),p=c((()=>(0,s._)("span",null,[(0,s.Uk)(" 火车 "),(0,s._)("br"),(0,s.Uk)(" Train ")],-1))),A={class:"page_cont"},g={class:"routertype"},y={class:"routetype_t"},_=["onClick"],w=c((()=>(0,s._)("br",null,null,-1))),f={key:0},v={class:"search-cont"},S={class:"cont"},C={style:{padding:"0 20px"}},x=c((()=>(0,s._)("span",null,"出发地/From",-1))),k={class:"change_city"},b=c((()=>(0,s._)("span",null,"目的地/To",-1))),D={class:"cont",style:{padding:"0 20px"}},P=c((()=>(0,s._)("span",null,"出发日期/Depart",-1))),I={key:0,class:"cont",style:{padding:"0 20px"}},E=c((()=>(0,s._)("span",null,"舱位/Class",-1))),T={class:"travrler"},U=c((()=>(0,s._)("span",null,[(0,s.Uk)("下一步"),(0,s._)("br"),(0,s.Uk)("Next Step")],-1))),L=[U],V={class:"pup"},B={class:"accountAuth-box",style:{height:"100%"}},W=c((()=>(0,s._)("h4",null,"提示",-1))),H=c((()=>(0,s._)("div",{class:"accountAuth-centen"},[(0,s._)("span",null,"根据铁路局规定,火车票实行实名制购买"),(0,s._)("br"),(0,s._)("label",{for:"iagreeC"},[(0,s._)("input",{id:"iagreeC",style:{display:"none"}}),(0,s.Uk)(" 请阅读 ")]),(0,s._)("a",{style:{color:"#4284C9"},href:"https://ezway.efasco.com/wxapp/%E7%81%AB%E8%BD%A6%E7%A5%A812036%E5%B8%90%E6%88%B7%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE.pdf"},"《账户授权协议》"),(0,s._)("br"),(0,s._)("span",null,"According to the regulations of the Railway Administration, train tickets are purchased under the real name system."),(0,s._)("label",{for:"iagreeC"},[(0,s._)("input",{id:"iagreeC",style:{display:"none"}}),(0,s.Uk)(" Please read the ")]),(0,s._)("a",{style:{color:"#4284C9"},href:"https://ezway.efasco.com/wxapp/%E7%81%AB%E8%BD%A6%E7%A5%A812036%E5%B8%90%E6%88%B7%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE.pdf"},"Account Authorization Agreement")],-1))),G={class:"accountAuth-btn"};function M(e,t,i,n,c,U){const M=(0,s.up)("van-icon"),O=(0,s.up)("van-field"),Y=(0,s.up)("van-col"),R=(0,s.up)("psd_cont"),N=(0,s.up)("van-search"),F=(0,s.up)("van-picker"),z=(0,s.up)("van-popup"),J=(0,s.up)("van-calendar"),K=(0,s.up)("van-button");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",d,[(0,s._)("div",h,[(0,s._)("span",u,[(0,s.Wm)(M,{name:"arrow-left",size:"25",onClick:t[0]||(t[0]=t=>e.$router.go(-1))})]),m,p]),(0,s._)("div",A,[(0,s._)("div",g,[(0,s._)("div",null,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.routetype_t,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,onClick:e=>c.router_active=t,class:(0,a.C_)({router_active:c.router_active==t})},[(0,s.Uk)((0,a.zw)(e.title)+" ",1),w,(0,s._)("span",null,(0,a.zw)(e.entitle),1),c.router_active==t?((0,s.wg)(),(0,s.iD)("hr",f)):(0,s.kq)("",!0)],10,_)))),128))]),(0,s._)("div",v,[(0,s._)("div",S,[(0,s._)("div",C,[(0,s.Wm)(Y,{span:"10"},{default:(0,s.w5)((()=>[x,(0,s.Wm)(O,{readonly:"",clickable:"",modelValue:c.cities[0].text,"onUpdate:modelValue":t[1]||(t[1]=e=>c.cities[0].text=e),placeholder:"选择城市",onClick:t[2]||(t[2]=e=>{c.showPicker=!0,c.cities_n=0})},null,8,["modelValue"])])),_:1}),(0,s.Wm)(Y,{span:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",k,[(0,s._)("img",{src:l,alt:"",onClick:t[3]||(t[3]=(...e)=>U.changeSelectedCityText&&U.changeSelectedCityText(...e))})])])),_:1}),(0,s.Wm)(Y,{span:"10",class:"aliginright"},{default:(0,s.w5)((()=>[b,(0,s.Wm)(O,{readonly:"",clickable:"",modelValue:c.cities[1].text,"onUpdate:modelValue":t[4]||(t[4]=e=>c.cities[1].text=e),placeholder:"选择城市",onClick:t[5]||(t[5]=e=>{c.showPicker=!0,c.cities_n=1})},null,8,["modelValue"])])),_:1})])]),(0,s._)("div",D,[(0,s.Wm)(Y,{span:"10"},{default:(0,s.w5)((()=>[P,(0,s.Wm)(O,{readonly:"",clickable:"",modelValue:c.date_D[0],"onUpdate:modelValue":t[6]||(t[6]=e=>c.date_D[0]=e),placeholder:"选择日期",onClick:t[7]||(t[7]=e=>{0==c.router_active?c.showPickerOne=!0:c.showPickerTwo=!0,c.date_n=0})},null,8,["modelValue"])])),_:1}),(0,s.Wm)(Y,{span:"4"}),(0,s.Wm)(Y,{span:"10",class:"aliginright"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("span",null,"返程日期/Return",512),[[o.F8,1==c.router_active]]),(0,s.wy)((0,s.Wm)(O,{readonly:"",clickable:"",modelValue:c.date_D[1],"onUpdate:modelValue":t[8]||(t[8]=e=>c.date_D[1]=e),placeholder:"选择日期",onClick:t[9]||(t[9]=e=>{1==c.router_active?c.showPickerTwo=!0:c.showPickerOne=!0,c.date_n=1})},null,8,["modelValue"]),[[o.F8,1==c.router_active]])])),_:1})]),0==c.router_active||1==c.router_active?((0,s.wg)(),(0,s.iD)("div",I,[(0,s.Wm)(Y,{span:"12"},{default:(0,s.w5)((()=>[E,(0,s.Wm)(O,{readonly:"",clickable:"",modelValue:c.cabin,"onUpdate:modelValue":t[10]||(t[10]=e=>c.cabin=e),placeholder:"选择舱位",onClick:t[11]||(t[11]=e=>c.showPicker3=!0)},null,8,["modelValue"])])),_:1})])):(0,s.kq)("",!0)])])]),(0,s._)("div",T,[(0,s.Wm)(R)])]),(0,s._)("div",{class:"next",onClick:t[12]||(t[12]=(...e)=>U.searchb&&U.searchb(...e))},L),(0,s._)("div",V,[(0,s.Wm)(z,{class:"select_popup",show:c.showPicker,"onUpdate:show":t[15]||(t[15]=e=>c.showPicker=e),round:"",position:"bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{modelValue:c.searchValue,"onUpdate:modelValue":t[13]||(t[13]=e=>c.searchValue=e),placeholder:"请输入城市名"},null,8,["modelValue"]),(0,s.Wm)(F,{"show-toolbar":"","allow-html":"","confirm-button-text":"确认/confirm","cancel-button-text":"取消/cancel",columns:U.getSearchcities(),onConfirm:U.onConfirm,onCancel:t[14]||(t[14]=e=>c.showPicker=!1)},null,8,["columns","onConfirm"])])),_:1},8,["show"]),(0,s.Wm)(J,{show:c.showPickerOne,"onUpdate:show":t[16]||(t[16]=e=>c.showPickerOne=e),onConfirm:U.onConfirmOne,"show-confirm":!1,color:"#044db5",title:"日期选择/Date selection","max-date":c.date_picker[1]},null,8,["show","onConfirm","max-date"]),(0,s.Wm)(J,{show:c.showPickerTwo,"onUpdate:show":t[17]||(t[17]=e=>c.showPickerTwo=e),type:"range",onConfirm:U.onConfirmTwo,color:"#044db5",title:"日期选择/Date selection","confirm-text":"完成/Confirm","confirm-disabled-text":"请选择结束时间/Select end time",formatter:U.formatter,"max-date":c.date_picker[1]},null,8,["show","onConfirm","formatter","max-date"]),(0,s.Wm)(z,{class:"select_popup",show:c.showPicker3,"onUpdate:show":t[19]||(t[19]=e=>c.showPicker3=e),round:"",position:"bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{"show-toolbar":"","allow-html":"",columns:c.cabins,onConfirm:U.onConfirm3,onCancel:t[18]||(t[18]=e=>c.showPicker3=!1),"confirm-button-text":"确认/confirm","cancel-button-text":"取消/cancel"},null,8,["columns","onConfirm"])])),_:1},8,["show"]),(0,s.Wm)(z,{class:"select_popup",show:c.AccountAuth,"onUpdate:show":t[22]||(t[22]=e=>c.AccountAuth=e),round:"",style:{width:"75%",height:"30%"}},{default:(0,s.w5)((()=>[(0,s._)("div",B,[W,H,(0,s._)("div",G,[(0,s.Wm)(K,{onClick:t[20]||(t[20]=e=>U.onAccountAuth(!0)),plain:"",type:"primary",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("同意/Agree")])),_:1}),(0,s.Wm)(K,{onClick:t[21]||(t[21]=e=>U.onAccountAuth(!1)),plain:"",type:"primary",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("关闭/Close")])),_:1})])])])),_:1},8,["show"])])])])}i(560);var O=i(1234),Y=i(9374),R=i(776),N={data(){return{searchCities:[],routetype_t:[{title:"单程",entitle:"One Way"},{title:"往返程",entitle:"Round Trip"}],router_active:0,cabin:"一等座-First-Class Seat",cabins:[{text:"商务座 特等座-Business-Class Seat",value:"Business-Class Seat"},{text:"一等座-First-Class Seat",value:"First-Class Seat"},{text:"二等座-Second-Class Seat",value:"Second-Class Seat"},{text:"高级软卧-High-Grade Soft Berth",value:"High-Grade Soft Berth"},{text:"软卧-Soft Sleeper",value:"Soft Sleeper"},{text:"高级动卧-Advanced Mobile Sleeper",value:"Advanced Mobile Sleeper"},{text:"动卧-Movable Lying",value:"Movable Lying"},{text:"硬卧-Hard Sleeper",value:"Hard Sleeper"},{text:"软座-Upholstered Seat",value:"Upholstered Seat"},{text:"硬座-Hard Seat",value:"Hard Seat"},{text:"无座-Without Seat",value:"Without Seat"}],trainSelectedCityText:"",trainSelectedCityText1:"",cities:[{namecn:"上海",nameen:"SHANGHAI",LocIdCity:"SHA",text:"上海(SHANGHAI)",id:"184"},{id:"172",LocIdCity:"BJS",namecn:"北京",nameen:"BEIJING",text:"北京(BEIJING)"}],date_D:[(new Date).format("yyyy-MM-dd"),new Date((new Date).getTime()+864e5).format("yyyy-MM-dd")],date_picker:[new Date,new Date((new Date).getTime()+12096e5),new Date],showPicker:!1,showPicker2:!1,showPickerOne:!1,showPickerTwo:!1,showPicker3:!1,cities_n:0,date_n:0,loading:!0,searchValue:"",citylist:[],city_load:!1,AccountAuth:!sessionStorage.getItem("AccountAuth"),AccountAuthX:!0}},created(){if(sessionStorage.getItem("city_train")&&(this.citylist=JSON.parse(sessionStorage.getItem("city_train"))),0==this.citylist.length&&this.getcitylist(),sessionStorage.getItem("search_train")){let e=JSON.parse(sessionStorage.getItem("search_train"));this.cabin=e.cabin,this.cities=e.cities,this.date_D=e.date,this.router_active=e.router_active}sessionStorage.getItem("choose_train")&&(sessionStorage.removeItem("choose_train"),sessionStorage.removeItem("getlist_t_0"),sessionStorage.removeItem("getlist_t_1"),sessionStorage.removeItem("savelist_t0"),sessionStorage.removeItem("savelist_t1"),sessionStorage.removeItem("savelist_0"),sessionStorage.removeItem("savelist_1"),sessionStorage.removeItem("getlist_0"),sessionStorage.removeItem("getlist_1"))},watch:{},methods:{async getcitylist(){try{let e=await Y.Z.get("https://timas.efasco.com/wxapp/public/train_city.json");console.log("g",e),sessionStorage.setItem("city_train",JSON.stringify(e.data)),this.dealCitylist(e.data)}catch(e){console.log(e)}},dealCitylist(e){e?(this.citylist=e,this.citylist.map(((e,t)=>{e.text=e.namecn+"/"+e.nameen,e.value=e.namecn}))):this.getcitylist},getSearchcities(){const e=this.citylist;this.citylist.map(((e,t)=>{e.text=e.namecn+"/"+e.nameen,e.value=e.namecn}));const t=e.filter((e=>e&&(e.namecn&&e.namecn.includes(this.searchValue)||e.nameen&&e.nameen.toLowerCase().includes(this.searchValue.toLowerCase()))));return t},searchStr(e,t){let i=[],s=e.charAt(0),a=e.length;for(let o=0;o<t.length;o++){let n=!1,l=t[o];for(let t in l)if("function"===typeof l[t])l[t]();else{let i="";null!==l[t]&&"string"===typeof l[t]?i=l[t]:null!==l[t]&&"string"!==typeof l[t]&&(i=JSON.stringify(l[t]));for(let t=0;t<i.length;t++)if(i.charAt(t).toLowerCase()===s.toLowerCase()&&i.substring(t).substring(0,a).toLowerCase()===e.toLowerCase()){n=!0;break}}!0===n&&i.push(l)}return i},onConfirm(e){console.log(e),this.cities_n?(this.trainSelectedCityText1=e.selectedOptions[0].value+"("+e.selectedOptions[0].nameen+")",this.cities[1]=e.selectedOptions[0]):(this.trainSelectedCityText=e.selectedOptions[0].value+"("+e.selectedOptions[0].nameen+")",this.cities[0]=e.selectedOptions[0]),this.showPicker=!1},changeSelectedCityText(){let e="",t={};e=this.trainSelectedCityText,this.trainSelectedCityText=this.trainSelectedCityText1,this.trainSelectedCityText1=e,t=this.cities[0],this.cities[0]=this.cities[1],this.cities[1]=t},onConfirmOne(e){this.date_D[this.date_n]=new Date(e).format("yyyy-MM-dd"),0==this.date_n&&this.get_back_Date(e),this.showPickerOne=!1},onConfirmTwo(e){const[t,i]=e;this.date_D[0]=new Date(t).format("yyyy-MM-dd"),this.date_D[1]=new Date(i).format("yyyy-MM-dd"),this.showPickerTwo=!1},formatter(e){return"start"===e.type?e.bottomInfo="开始/Start":"end"===e.type&&(e.bottomInfo="结束/End"),e},onConfirm3(e){this.cabin=e.selectedOptions[0].text,this.showPicker3=!1},onAccountAuth(e){this.AccountAuth=!1,e?sessionStorage.setItem("AccountAuth",1):sessionStorage.removeItem("AccountAuth")},searchb(){if(!sessionStorage.getItem("AccountAuth"))return void(this.AccountAuth=!0);if(this.cities[0].text==this.cities[1].text)return void(0,R.NU)({type:"danger",message:"请选择不同的出发地和目的地"});const e={psg:this.$store.state.choose_psg.concat(this.$store.state.choose_psg_more),cabin:this.cabin,cities:this.cities,date:this.date_D,router_active:this.router_active,type:this.cabinType(this.cabin)};if(this.date_D[0]){if(1==this.router_active){let e=this.date_D[0],t=this.date_D[1];if(!e||!t)return void this.$notify("请选择日期");if(new Date(e.replace(/-/g,"/")).getTime()>new Date(t.replace(/-/g,"/")).getTime())return void this.$$notify("返程日期应在出发日期后")}this.cities[0]&&this.cities[1]?0!=this.$store.state.choose_psg.length?(sessionStorage.setItem("search_train",JSON.stringify(e)),console.log("查询信息保存",e),this.$router.push("/trainticket")):this.$notify("请选择乘机人"):this.$notify("请选择城市")}else this.$notify("请选择日期")},cabinType(e){console.log("座位类型",e);let t=["一等座","二等座","商务座","硬座","软座","动卧","高级动卧","高级软卧","硬卧","特等座","无座","二等卧","一等卧","软卧"];return"一等座-First-Class Seat"==e?t[0]:"二等座-Second-Class Seat"==e?t[1]:"商务座 特等座-Business-Class Seat"==e?t[2]:"硬座-Hard Seat"==e?t[3]:"软卧-Soft Sleeper"==e?t[4]:"动卧-Movable Lying"==e?t[5]:"高级动卧-Advanced Mobile Sleeper"==e?t[6]:"高级软卧-High-Grade Soft Berth"==e?t[7]:"硬卧-Hard Sleeper"==e?t[8]:"软座-Upholstered Seat"==e?t[13]:"无座-Without Seat"==e?t[10]:"二等卧/Second class sleeper"==e?t[11]:"一等卧/First class berth"==e?t[12]:void 0},get_back_Date(e){let t=e.getTime()+864e5;this.date_D[1]=new Date(t).format("yyyy-MM-dd"),this.showPicker2=!1}},computed:{},components:{psd_cont:O.Z},beforeRouteLeave(e,t,i){"/index"==e.path&&sessionStorage.removeItem("search_train"),i()}},F=i(89);const z=(0,F.Z)(N,[["render",M],["__scopeId","data-v-2b0df2aa"]]);var J=z},5370:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAeCAYAAACrI9dtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJaADAAQAAAABAAAAHgAAAABGOYiYAAAE9klEQVRYCb1XTWxUVRT+7pufNz+dKdOWQqF/tvGnQtHWGCSEaFnoEjUkuDC61IU7VyYQwsqdG5eauDLoBlxomvgbf5AiRRAItaUUmf4X2tLpzLz5v57zZqZ9b96bmVdpPMm077177rnfPfec75wrJAm2IA9TBdx7mEV0LYuVZN52ZlPAhc5GD7p2eLDDp9jq1PoonIJazxRwZTalA1LdCvaG3dgTciPoVRDwCH2NZFYiQXpz6znMxLLI5KQObHCPD2HVOThHoG4upnF1Po2AV+DZ3T70NHlQhFF9v+z+u6tZXJ1LgcEysH2t3uoTDCM1QRXI8sVpDZPLGRwgMM/sVqHUQ2Mwzo9s46+FNG7Qxh6LeHC401/XhrvChuk1nZdY0fIY6glSjNRUNc0zvvAmBtpURPwKLtzTCKTEi90Bo4rluaanLNqP+GEmlsOPU0nyukphoFa15jz6qppwPtBOycFeu07H+aBK5rK1/xUUL9i/S0UTHeVlyuRqYgHFgelYMmlgec6xelnxOcrEpXgOs3ScdmICtRDPY5RS2LFo6yicOg75y3nHU1ixjfitmQh2iijDTjZAsYMuzWgYv58Bs7YjaWyBGDwKee5jILbsaEpZqZPYfoaqgt3JbIAaWyIwlP6cspeIm5yKGDoBmYxDfvGR0ym6XkfYg0yJcion6qBSVA6uLWwe2wKdN7OxnciRYeDO9c2h3n6Irj4URr8Dbv6++b3OU7hUE+NUlipF56nfiNTurGRMYwGPgteeDoHKnEnk6PeQX38K5dTngMulj8mL36Dw2RmI5jYoZ74EvD7TnPILk/H5W+tIkxPspIOK+NGeAMRiPCeHJ+J2OthP6cuZYpL5u8ifPgFx4AhEOAKpJYD1VciJP3U14W8gsCX293ghBoYg3nh/w8T4gwxGbMLDRdR/rK8BISrwbvZQS6BoRMsW9OLJmcGylMiDd6e6DAUvFCkucGsE3PXIvDmtpVaxwclrpuL9ZIsXE1RLK9ue/a2qDoiNuw91+IuL0N/oWg4/TSXw8uNB0OnZyz9jEIEQlNNngUgrCBkkxVPhk5MQvgCUdz4E1FJtU8n23l6LnRfa/Ri+ndA3xYMN5J1+Q9kxVVl2HQsX4V3Borf0D4Y/cvY2xJsfFAHxdyEgfz6na4jX3wP2HTJo2z/uJNu91P5w98HyPIE0HoYJFFdyDvBp6iyrgRKvvGVeKTqux5N4YhDipePmsRpvHKtRWqcl6LZ0IJZD4haWW137/LCuIn84C0HZprx90jpY44vPLTBAwA62VyQSzbGA6m32IJ6RRBH2PGVaZ20Z8vK3EK++C+xsNw05eXmKgt6uTbbtp34l3iKq0HnKeNaWhVYWgelxgOiBY2u7xBZUgnrqr4jkuD4d6drMzu1atJ4dy/HxhCDdTg4TGC41fGnYLmFbfAr1xBYUT+omL3HLeoVaGf49qoxSU8d2mvz2VGO0b3t8RoUxamXYIPdABzt8G6xr1Kn1HEsX8MdMSr8LcqYxo9eTuqDYwDxdLi9ENWgUa2yUf411br6rWgGTVML+pk2F6CLKgHhjTsQRKDZEJVBf4MZiSq/yYZ+reEOm+POXalKSameC6GSeMjeWysNH3/toA1zYt3JfdAyqvEPuFNlzTLD3qWAzEG5FBFGCSoTIScJx000XT/bMfyGKLYMqgzP+L7e0W/GGcX7l878vHf1KqFZwewAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=878.969ba414.js.map